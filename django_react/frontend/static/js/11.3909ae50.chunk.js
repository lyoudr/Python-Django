(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[11],{120:function(e,t,n){e.exports=n.p+"static/media/icons8-plus.c7a0b1c6.svg"},122:function(e,t,n){},255:function(e,t,n){"use strict";n.r(t);var r=n(7),a=n(8),c=n(12),o=n(9),s=n(10),i=n(0),u=n.n(i),l=n(23),h=n(2),f=n(71),m=n.n(f),d=n(72),p=n(70),y=n(11),v=n.n(y),g=n(73);n(122);var b=function(e){var t=Object(h.h)().path,n=Object(h.g)().id,r=Object(i.useState)({Ann:1,John:2,Judy:3}),a=Object(p.a)(r,2),c=a[0],o=(a[1],u.a.createRef()),s=u.a.createRef();Object(i.useEffect)((function(){return"/discuss/:id/post"===t&&(document.getElementById("discuss_type").style.display="none"),function(){document.getElementById("discuss_type").style.display="block"}}));var l=function(){var t=Object(d.a)(m.a.mark((function t(){var r,a,i;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=new Date,a={discuss_type:n,title:o.current.value,content:s.current.value,user_id:c[v.a.get("userId")],time:r.toISOString().replace(/T/," ").replace(/\..+/,"")},t.next=4,g.a.savePost("".concat("http://ec2-13-231-184-72.ap-northeast-1.compute.amazonaws.com:3000/api","/save_post/"),a);case 4:"ok"===(i=t.sent).status&&!0===i.isSaved&&e.history.goBack();case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return u.a.createElement("section",{className:"discuss_post"},u.a.createElement("div",{className:"container"},u.a.createElement("div",{className:"row justify-content-center"},u.a.createElement("form",{className:"discuss_form col-10 col-md-6"},u.a.createElement("label",{className:"label"},"Title"),u.a.createElement("input",{ref:o,className:"input"}),u.a.createElement("label",{className:"label"},"Content"),u.a.createElement("textarea",{ref:s,className:"textarea",rows:"15"}),u.a.createElement("a",{onClick:l},"Submit")))))};var E=function(e){var t=Object(h.g)().id,n=Object(h.h)(),r=u.a.createRef(),a=Object(i.useState)("1"),c=Object(p.a)(a,2),o=c[0],s=c[1],l=Object(i.useState)({Ann:1,John:2,Judy:3}),f=Object(p.a)(l,2),y=f[0];f[1],Object(i.useEffect)((function(){var t=new URLSearchParams(e.location.search).get("id");s(t)}));var b=Object(i.useState)({}),E=Object(p.a)(b,2),w=E[0],O=E[1],j=Object(i.useState)([]),_=Object(p.a)(j,2),N=_[0],x=_[1];Object(i.useEffect)((function(){return console.log("id is =>",t),S(),"/discuss/:id/each"===n.path&&(document.getElementById("discuss_type").style.display="none"),function(){document.getElementById("discuss_type").style.display="block"}}),[o]);var S=function(){var e=Object(d.a)(m.a.mark((function e(){var t,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new URL("".concat("http://ec2-13-231-184-72.ap-northeast-1.compute.amazonaws.com:3000/api","/get_eachpost/")),e.next=3,g.a.getEachPost(t,o);case 3:n=e.sent,O(n.discuss),x(n.comments);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=function(){var e=Object(d.a)(m.a.mark((function e(){var t,n,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat("http://ec2-13-231-184-72.ap-northeast-1.compute.amazonaws.com:3000/api","/leave_msg/"),n=new Date,a={comment:r.current.value,time:n.toISOString().replace(/T/," ").replace(/\..+/,""),discuss_id:o,user_id:y[v.a.get("userId")]},console.log("msg_info is =>",a),e.next=6,g.a.leaveMessage(t,a);case 6:!0===e.sent.isLeaveMsg&&window.location.reload();case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return u.a.createElement("section",{className:"discuss_content"},u.a.createElement("div",{className:"container"},u.a.createElement("div",{className:"row justify-content-center"},w.time&&u.a.createElement("div",{className:"col-10 col-md-8 content"},u.a.createElement("p",{className:"title"},w.title),u.a.createElement("p",{className:"post_content"},w.content),u.a.createElement("div",{className:"post_info"},u.a.createElement("span",{className:"author"},Object.keys(y)[w.user-1]),u.a.createElement("span",{className:"time"},w.time.slice(0,10)))),u.a.createElement("div",{className:"col-10 col-md-8 message"},u.a.createElement("p",{className:"notify"},"Leave a message..."),u.a.createElement("textarea",{ref:r,className:"messages"}),u.a.createElement("button",{onClick:k,className:"submit"},"Submit")),u.a.createElement("div",{className:"col-10 col-md-8 comments"},N&&N.map((function(e,t){return u.a.createElement("div",{key:"".concat(e.comments,"-").concat(t),className:"each_comment"},u.a.createElement("p",{className:"comment_content"},e.comments),u.a.createElement("div",{className:"comment_info"},u.a.createElement("p",{className:"comment_owner"},Object.keys(y)[e.user-1]),u.a.createElement("p",{className:"comment_time"},e.time.slice(0,10))))}))))))},w=n(120),O=n.n(w);var j=function(e){var t=Object(h.g)().id,n=Object(i.useState)("music"),r=Object(p.a)(n,2),a=r[0],c=r[1],o=Object(i.useState)([]),s=Object(p.a)(o,2),f=s[0],y=s[1];Object(i.useEffect)((function(){c(t)})),Object(i.useEffect)((function(){v()}),[a]);var v=function(){var e=Object(d.a)(m.a.mark((function e(){var t,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new URL("".concat("http://ec2-13-231-184-72.ap-northeast-1.compute.amazonaws.com:3000/api","/get_post/")),e.next=3,g.a.getPosts(t,a);case 3:n=e.sent,y(n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return u.a.createElement(u.a.Fragment,null,u.a.createElement("section",{className:"discuss_type",id:"discuss_type"},u.a.createElement("div",{className:"container"},u.a.createElement("div",{className:"row justify-content-center"},u.a.createElement("div",{className:"discuss_title col-10 col-md-8"},u.a.createElement("p",{className:"type"},"".concat(a.slice(0,1).toUpperCase()).concat(a.substr(1))),u.a.createElement("span",{onClick:function(){e.history.push("/discuss/".concat(a,"/post"))},className:"add"},u.a.createElement("img",{src:O.a}))),f.map((function(e,t){return u.a.createElement("div",{className:"discuss_post col-10 col-md-8",key:"".concat(e.title,"-").concat(t)},u.a.createElement("p",{className:"title"},e.title),u.a.createElement("p",{className:"content ".concat(e.content.length>20?"overflow":"")},e.content),u.a.createElement("div",{className:"info"},u.a.createElement(l.b,{className:"read_more",to:"/discuss/".concat(a,"/each?id=").concat(e.id)},"Read more"),u.a.createElement("p",{className:"author"},e.user_info.username),u.a.createElement("p",{className:"time"},e.time.slice(0,10))))}))))),u.a.createElement(h.d,null,u.a.createElement(h.b,{path:"/discuss/:id/each",component:E}),u.a.createElement(h.b,{path:"/discuss/:id/post",component:b})))},_=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).state={discuss_type:["sports","music","entertainment","finance"],type:"sports"},a.selectType=a.selectType.bind(Object(c.a)(a)),a}return Object(a.a)(n,[{key:"componentDidMount",value:function(){this.props.history.push("/discuss/sports")}},{key:"selectType",value:function(e){console.log("type is =>",e),this.setState({type:e})}},{key:"render",value:function(){var e=this;return u.a.createElement("div",{className:"discuss main"},u.a.createElement("header",{className:"header_background"}),u.a.createElement("section",{className:"discuss_board"},u.a.createElement("div",{className:"container"},u.a.createElement("div",{className:"row justify-content-center"},this.state.discuss_type.map((function(t){return u.a.createElement(l.b,{className:"col-6 col-md-2 discuss_type ".concat(e.state.type===t?"active":""),key:t,to:"/discuss/".concat(t),onClick:e.selectType.bind(e,t)},t)}))))),u.a.createElement(h.d,null,u.a.createElement(h.b,{path:"/discuss/:id",component:j})))}}]),n}(u.a.Component);t.default=_},70:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(30);function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,c=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(i){a=!0,c=i}finally{try{r||null==s.return||s.return()}finally{if(a)throw c}}return n}}(e,t)||Object(r.a)(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},71:function(e,t,n){e.exports=n(76)},72:function(e,t,n){"use strict";function r(e,t,n,r,a,c,o){try{var s=e[c](o),i=s.value}catch(u){return void n(u)}s.done?t(i):Promise.resolve(i).then(r,a)}function a(e){return function(){var t=this,n=arguments;return new Promise((function(a,c){var o=e.apply(t,n);function s(e){r(o,a,c,s,i,"next",e)}function i(e){r(o,a,c,s,i,"throw",e)}s(void 0)}))}}n.d(t,"a",(function(){return a}))},73:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(71),a=n.n(r),c=n(72),o=n(11),s={request_headers:{"Content-Type":"application/json",Authorization:n.n(o).a.get("access_token")},requesDishes:function(){var e=Object(c.a)(a.a.mark((function e(t,n){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("called fetch!"),e.next=3,fetch(t,{method:"POST",mode:"cors",credentials:"same-origin",headers:this.request_headers,body:JSON.stringify(n)}).then((function(e){return e.json()}));case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),uploadImg:function(e,t){return fetch("".concat(e,"/").concat(t.userId,"/"),{method:"POST",headers:this.request_headers,body:t.formData}).then((function(e){return e.json()}))},savePersonal:function(e,t){return fetch(e,{headers:this.request_headers,method:"POST",body:JSON.stringify(t)}).then((function(e){return e.json()}))},deleteMessage:function(e,t){return console.log("data is =>",t),fetch(e,{headers:this.request_headers,method:"DELETE",body:JSON.stringify(t)}).then((function(e){return e.json()}))},fetchImage:function(e,t){return fetch("".concat(e).concat(t),{headers:this.request_headers,method:"GET"}).then((function(e){var t=e.body.getReader();return new ReadableStream({start:function(e){return function n(){return t.read().then((function(t){var r=t.done,a=t.value;if(!r)return e.enqueue(a),n();e.close()}))}()}})})).then((function(e){return new Response(e)})).then((function(e){return e.blob()})).then((function(e){return URL.createObjectURL(e)}))},shortestPath:function(e,t){return fetch(e,{headers:this.request_headers,method:"POST",body:t}).then((function(e){return e.json()}))},choosePrice:function(e,t){return fetch(e,{headers:this.request_headers,method:"POST",body:JSON.stringify({price:t})}).then((function(e){return e.json()})).catch((function(e){console.log("err is =>",e)}))},checkOut:function(e,t){return console.log("selected_item is =>",t),fetch(e,{headers:this.request_headers,method:"POST",body:JSON.stringify(t)}).then((function(e){return e.json()}))},getShopItems:function(e,t){var n={user:t};return Object.keys(n).forEach((function(t){return e.searchParams.append(t,n[t])})),console.log("url is =>",e),fetch(e,{headers:this.request_headers,method:"GET"}).then((function(e){return e.json()}))},getPosts:function(e,t){var n={discuss_type:t};return Object.keys(n).forEach((function(t){return e.searchParams.append(t,n[t])})),fetch(e,{headers:this.request_headers,method:"GET"}).then((function(e){return e.json()}))},getEachPost:function(e,t){var n={post_id:t};return Object.keys(n).forEach((function(t){return e.searchParams.append(t,n[t])})),fetch(e,{headers:this.request_headers,method:"GET"}).then((function(e){return e.json()}))},savePost:function(e,t){return fetch(e,{headers:this.request_headers,method:"POST",body:JSON.stringify(t)}).then((function(e){return e.json()}))},leaveMessage:function(e,t){return fetch(e,{headers:this.request_headers,method:"POST",body:JSON.stringify(t)}).then((function(e){return e.json()}))}}},76:function(e,t,n){var r=function(e){"use strict";var t=Object.prototype,n=t.hasOwnProperty,r="function"===typeof Symbol?Symbol:{},a=r.iterator||"@@iterator",c=r.asyncIterator||"@@asyncIterator",o=r.toStringTag||"@@toStringTag";function s(e,t,n,r){var a=t&&t.prototype instanceof l?t:l,c=Object.create(a.prototype),o=new O(r||[]);return c._invoke=function(e,t,n){var r="suspendedStart";return function(a,c){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw c;return _()}for(n.method=a,n.arg=c;;){var o=n.delegate;if(o){var s=b(o,n);if(s){if(s===u)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=i(e,t,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}(e,n,o),c}function i(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(r){return{type:"throw",arg:r}}}e.wrap=s;var u={};function l(){}function h(){}function f(){}var m={};m[a]=function(){return this};var d=Object.getPrototypeOf,p=d&&d(d(j([])));p&&p!==t&&n.call(p,a)&&(m=p);var y=f.prototype=l.prototype=Object.create(m);function v(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function g(e,t){var r;this._invoke=function(a,c){function o(){return new t((function(r,o){!function r(a,c,o,s){var u=i(e[a],e,c);if("throw"!==u.type){var l=u.arg,h=l.value;return h&&"object"===typeof h&&n.call(h,"__await")?t.resolve(h.__await).then((function(e){r("next",e,o,s)}),(function(e){r("throw",e,o,s)})):t.resolve(h).then((function(e){l.value=e,o(l)}),(function(e){return r("throw",e,o,s)}))}s(u.arg)}(a,c,r,o)}))}return r=r?r.then(o,o):o()}}function b(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,b(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var r=i(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,u;var a=r.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function w(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function j(e){if(e){var t=e[a];if(t)return t.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var r=-1,c=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return c.next=c}}return{next:_}}function _(){return{value:void 0,done:!0}}return h.prototype=y.constructor=f,f.constructor=h,f[o]=h.displayName="GeneratorFunction",e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,o in e||(e[o]="GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},v(g.prototype),g.prototype[c]=function(){return this},e.AsyncIterator=g,e.async=function(t,n,r,a,c){void 0===c&&(c=Promise);var o=new g(s(t,n,r,a),c);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},v(y),y[o]="Generator",y[a]=function(){return this},y.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=j,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var c=this.tryEntries[a],o=c.completion;if("root"===c.tryLoc)return r("end");if(c.tryLoc<=this.prev){var s=n.call(c,"catchLoc"),i=n.call(c,"finallyLoc");if(s&&i){if(this.prev<c.catchLoc)return r(c.catchLoc,!0);if(this.prev<c.finallyLoc)return r(c.finallyLoc)}else if(s){if(this.prev<c.catchLoc)return r(c.catchLoc,!0)}else{if(!i)throw new Error("try statement without catch or finally");if(this.prev<c.finallyLoc)return r(c.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var c=a;break}}c&&("break"===e||"continue"===e)&&c.tryLoc<=t&&t<=c.finallyLoc&&(c=null);var o=c?c.completion:{};return o.type=e,o.arg=t,c?(this.method="next",this.next=c.finallyLoc,u):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),w(n),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;w(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:j(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),u}},e}(e.exports);try{regeneratorRuntime=r}catch(a){Function("r","regeneratorRuntime = r")(r)}}}]);
//# sourceMappingURL=11.3909ae50.chunk.js.map