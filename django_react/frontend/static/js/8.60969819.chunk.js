(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[8,15],{118:function(e,t,n){},119:function(e,t,n){},139:function(e,t,n){"use strict";n.r(t),n.d(t,"isNavOpen",(function(){return g}));var a=n(7),r=n(8),o=n(12),c=n(9),s=n(10),i=n(0),l=n.n(i),u=n(123),m=n(23),h=n(70),f=n(251),d=(n(118),new f.a(!0)),p=function(){var e=Object(i.useState)("darkoff"),t=Object(h.a)(e,2),n=t[0],a=t[1];return Object(i.useEffect)((function(){d.next(n)}),[n]),l.a.createElement("div",{className:"switch_theme"},l.a.createElement("label",{className:"switch ".concat("darkoff"===n?"off":"on")},l.a.createElement("input",{type:"checkbox",onClick:function(e){e.stopPropagation(),a("darkoff"===n?"darkon":"darkoff")}}),l.a.createElement("span",{className:"slider round"})))},g=(n(119),new f.a),v=function(e){Object(c.a)(n,e);var t=Object(s.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).state={selecteditem:null,routeChange:!1,theme:"darkoff"},r.choosenav=r.choosenav.bind(Object(o.a)(r)),r.closeSide=r.closeSide.bind(Object(o.a)(r)),r.openSideBar=r.openSideBar.bind(Object(o.a)(r)),r.navref=l.a.createRef(),r.dimscreenRef=l.a.createRef(),r}return Object(r.a)(n,[{key:"componentDidMount",value:function(){var e=this;d.subscribe((function(t){return e.setState({theme:t})}))}},{key:"componentWillUnmount",value:function(){d.unsubscribe()}},{key:"choosenav",value:function(e){this.state.selecteditem&&this.state.selecteditem.classList.remove("active");var t=document.getElementById(e);this.setState({selecteditem:t}),document.getElementById(e).classList.add("active")}},{key:"closeSide",value:function(){document.body.clientWidth<600&&(this.navref.current.classList.add("hide"),this.navref.current.classList.remove("show"),this.dimscreenRef.current.classList.remove("active"),g.next("hide"))}},{key:"openSideBar",value:function(){document.body.clientWidth<600&&(this.navref.current.classList.remove("hide"),this.navref.current.classList.add("show"),this.dimscreenRef.current.classList.add("active"),g.next("show"))}},{key:"render",value:function(){var e=this;return l.a.createElement(l.a.Fragment,null,l.a.createElement("aside",{ref:this.navref,className:this.state.theme},l.a.createElement("div",{onClick:this.closeSide,className:"closeSide"},"X"),l.a.createElement("div",{className:"nav flex-column nav-pills mt-5",id:"v-pills-tab",role:"tablist","aria-orientation":"vertical"},l.a.createElement(u.a,null,[{link:"/pianogame",name:"PianoGame"},{link:"/printout",name:"PrintOut"},{link:"/chat",name:"Chat"},{link:"/courses",name:"Courses"},{link:"/shoplist",name:"ShopList"},{link:"/search-restaurant",name:"Restaurant"},{link:"/discuss",name:"Discuss"}].map((function(t,n){return l.a.createElement("li",{onClick:function(){e.choosenav("navitem".concat(n)),e.closeSide()},key:"nav".concat(n),className:"nav-link"},l.a.createElement(m.b,{to:t.link,className:e.state.theme},l.a.createElement("span",{id:"navitem".concat(n),className:"un"},t.name)))}))),l.a.createElement(p,null))),l.a.createElement("div",{ref:this.dimscreenRef,className:"dimScreen"}))}}]),n}(l.a.Component);t.default=v},194:function(e,t){e.exports="data:image/png;base64,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"},195:function(e,t,n){},196:function(e,t,n){e.exports=n.p+"static/media/send.371155ee.svg"},197:function(e,t,n){e.exports=n.p+"static/media/trash.665926e2.svg"},198:function(e,t,n){},254:function(e,t,n){"use strict";n.r(t);var a=n(19),r=n(83),o=n(7),c=n(8),s=n(12),i=n(9),l=n(10),u=n(70),m=n(0),h=n.n(m),f=n(194),d=[{src:n.n(f).a}],p=n(73),g=(n(195),n(2)),v=n(18),y=n(15),b=n(139),E=n(11),w=n.n(E),O=n(196),j=n.n(O),k=n(197),N=n.n(k),S=(n(37),n(198),function(e){Object(i.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).state={people:{1:"Ann",2:"John",3:"Judy"},message:[],contacts:[],selected_contact:null,person_info:null,user_img:null,friend_img:null,ori_class:"",is_contacts_open:"",socket:null},a.messageRef=h.a.createRef(),a.connectwebSocket=a.connectwebSocket.bind(Object(s.a)(a)),a.fetchContacts=a.fetchContacts.bind(Object(s.a)(a)),a.fetchImage=a.fetchImage.bind(Object(s.a)(a)),a.getKeyByValue=a.getKeyByValue.bind(Object(s.a)(a)),a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.props.switchChat("none"),b.isNavOpen.subscribe((function(t){e.setState({is_contacts_open:t})})),document.getElementById("message".concat(this.state.message.length-1))&&setTimeout((function(){return document.getElementById("message".concat(e.state.message.length-1)).classList.add("show")})),this.fetchContacts()}},{key:"componentWillUnmount",value:function(){this.props.switchChat("block")}},{key:"fetchContacts",value:function(){var e=this;this.props.dispatch(Object(y.h)(w.a.get("userId"))).then((function(t){console.log("res is =>",t);var n=t.postsByPersonId["".concat(w.a.get("userId"))].contacts;console.log("contacts is =>",n),e.setState({contacts:n,message:n[Object.keys(n)[0]],selected_contact:Object.keys(n)[0]},(function(){e.setState({socket:new WebSocket("".concat("ws://ec2-13-231-184-72.ap-northeast-1.compute.amazonaws.com:4600/chatroom","/").concat(w.a.get("userId"),"-").concat(e.state.selected_contact),"echo-protocol")},(function(){return e.connectwebSocket()})),e.fetchImage(w.a.get("userId"),"user_img"),e.fetchImage(e.state.selected_contact,"friend_img")}))}))}},{key:"fetchImage",value:function(e,t){var n=this;console.log("state is =>",t),p.a.fetchImage("".concat("http://ec2-13-231-184-72.ap-northeast-1.compute.amazonaws.com:3000/api","/user_image/"),e).then((function(e){return n.setState(Object(a.a)({},t,e),(function(){return console.log("this.state.user_img is =>",n.state.user_img)}))}))}},{key:"connectwebSocket",value:function(){var e=this;this.state.socket.onopen=function(){return console.log("connect on websocket"),function(){e.state.socket.close(),console.log("close websocket!")}},this.state.socket.onerror=function(e){console.log("Web Socket error => ".concat(e))},this.state.socket.onmessage=function(t){var n=JSON.parse(t.data);console.log("receivedMsg is =>",n),e.setState((function(e){return{message:[].concat(Object(v.a)(e.message),[n])}}))}}},{key:"sendMessage",value:function(){console.log("send!");var e=new Date;this.state.socket.send(JSON.stringify({who_send:w.a.get("userId"),message:this.messageRef.current.value,time:e.toISOString().replace(/T/," ").replace(/\..+/,""),person:this.state.selected_contact}))}},{key:"selectContact",value:function(e,t){var n=this;this.setState({message:this.state.contacts[Object.keys(this.state.contacts)[t]],selected_contact:e},(function(){n.fetchImage(n.state.selected_contact,"friend_img"),n.setState({socket:new WebSocket("".concat("ws://ec2-13-231-184-72.ap-northeast-1.compute.amazonaws.com:4600/chatroom","/").concat(w.a.get("userId"),"-").concat(n.state.selected_contact),"echo-protocol")},(function(){return n.connectwebSocket()}))}))}},{key:"showPeronalInfo",value:function(e){this.setState({person_info:e})}},{key:"getKeyByValue",value:function(e,t){return Object.keys(e).find((function(n){return e[n]===t}))}},{key:"deleteMessage",value:function(e,t){var n=this;console.log("info is =>",e);var a={who_send_id:this.getKeyByValue(this.state.people,e.who_send),who_receive:e.who_receive,message:e.message,time:e.time};p.a.deleteMessage("".concat("http://ec2-13-231-184-72.ap-northeast-1.compute.amazonaws.com:3000/api","/delete_msg/"),a).then((function(e){"ok"===e.status&&"yes"===e.isDeleted&&n.setState((function(e){return e.message[t].isDeleted=!0,e}))}))}},{key:"render",value:function(){var e=this,t=this.state.person_info,n=this.state.people;return h.a.createElement("main",{className:"chatroom"},h.a.createElement("section",{className:"chat"},h.a.createElement("aside",{className:"friend ".concat(this.state.is_contacts_open)},h.a.createElement("a",{className:"each_contact title"},"Contacts"),Object.keys(this.state.contacts).map((function(t,n){return h.a.createElement("a",{className:"each_contact ".concat(e.state.selected_contact===t?"active":""),onClick:e.selectContact.bind(e,t,n),key:t},t)}))),h.a.createElement("div",{className:"container"},h.a.createElement("div",{className:"row"},h.a.createElement("div",{className:"col-12 chat_area"},h.a.createElement("div",{className:"message_area"},this.state.message.map((function(t,n){return h.a.createElement("div",{key:"message_".concat(n),className:"each_message ".concat(t.isDeleted?"hide":"")},t.who_send!==w.a.get("userId")&&h.a.createElement("img",{className:"friend_img left",src:e.state.friend_img,onClick:e.showPeronalInfo.bind(e,t)}),h.a.createElement("div",{key:"".concat(t,"_").concat(n),className:t.who_send===w.a.get("userId")?"message right ".concat(e.state.ori_class):"message lef ".concat(e.state.ori_class),id:"message".concat(n)},h.a.createElement("p",{className:"name"},t.who_send),h.a.createElement("p",{className:"content"},t.message),h.a.createElement("p",{className:"time"},t.time),h.a.createElement("a",{className:"delete",onClick:e.deleteMessage.bind(e,t,n)},h.a.createElement("img",{src:N.a}))),t.who_send===w.a.get("userId")&&h.a.createElement("img",{className:"user_img right",src:e.state.user_img,onClick:e.showPeronalInfo.bind(e,t)}))})),t&&h.a.createElement(h.a.Fragment,null,h.a.createElement("div",{className:"dimScreen_userinfo"}),h.a.createElement("div",{className:"userinfo_modal"},h.a.createElement("div",{className:"userinfo_area"},h.a.createElement("img",null),h.a.createElement("a",{onClick:function(){return e.setState({person_info:null})}},"X"),h.a.createElement("p",null,n["".concat(t.who_send_id)]),h.a.createElement("p",null,t.job),h.a.createElement("p",null,t.country),h.a.createElement("p",null,t.hobby),h.a.createElement("p",null,t.guide))))),h.a.createElement("div",{className:"message_typing"},h.a.createElement("input",{ref:this.messageRef}),h.a.createElement("a",{className:"send",onClick:this.sendMessage.bind(this)},h.a.createElement("img",{src:j.a}))))))))}}]),n}(h.a.Component)),x=n(29),I=Object(x.b)((function(e){return{contacts:e.postByPersonId}}))(S),L=(n(77),function(e){var t=e.setImg,n=Object(m.useState)(null),a=Object(u.a)(n,2),r=a[0],o=a[1],c=d,s=h.a.createRef();return h.a.createElement(h.a.Fragment,null,h.a.createElement("div",{id:"upload_img",className:"col-5 col-md-3 text-center picture",onClick:function(){s.current.click()}},r?h.a.createElement("img",{src:r,alt:"...",className:"img-fluid"}):h.a.createElement("img",{id:"personal_img",src:c[0].src,alt:"...",className:"img-fluid"}),h.a.createElement("input",{onChange:function(){var e=s.current.files[0];console.log("Img is =>",e);var n=URL.createObjectURL(e);console.log("ImgURL is =>",n),o(n),t(e)},ref:s,type:"file"})))}),C=function(e){Object(i.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).state={form:{name:"",country:"",gender:"",job:"",hobby:"",guide:""}},a.handleInputChange=a.handleInputChange.bind(Object(s.a)(a)),a}return Object(c.a)(n,[{key:"handleInputChange",value:function(e){var t=e.target.name,n=e.target.value;"gender"===t&&n===this.state.form.gender&&(n=""),this.setState((function(e){return{form:Object(r.a)(Object(r.a)({},e.form),{},Object(a.a)({},t,n))}}))}},{key:"render",value:function(){return h.a.createElement(h.a.Fragment,null,h.a.createElement("div",{className:"form-group row"},h.a.createElement("label",{className:"col-sm-2 col-3 col-form-label text-center"},"Name"),h.a.createElement("div",{className:"col-sm-9 col-9"},h.a.createElement("input",{id:"name",className:"form-control",type:"text",name:"name",value:this.state.form.name,onChange:this.handleInputChange}))),h.a.createElement("div",{className:"form-group row"},h.a.createElement("label",{className:"col-sm-2 col-3 col-form-label text-center"},"Country"),h.a.createElement("div",{className:"col-sm-9 col-9"},h.a.createElement("select",{id:"select",className:"form-control",name:"country",value:this.state.form.country,onChange:this.handleInputChange},h.a.createElement("option",{value:"USA"},"USA"),h.a.createElement("option",{value:"Taiwan",defaultChecked:!0},"Taiwan"),h.a.createElement("option",{value:"China"},"China"),h.a.createElement("option",{value:"Japan"},"Japan")))),h.a.createElement("div",{className:"form-group row justify-content-start checkbox"},h.a.createElement("label",{className:"col-sm-2 col-3 col-form-label text-center"},"Gender"),h.a.createElement("div",{className:"col-sm-9 col-9 gender_choice"},h.a.createElement("div",null,h.a.createElement("input",{id:"girl",type:"checkbox",name:"gender",checked:"girl"===this.state.form.gender,value:"girl",onChange:this.handleInputChange}),h.a.createElement("label",{className:"sex"},"Girl")),h.a.createElement("div",null,h.a.createElement("input",{id:"boy",type:"checkbox",name:"gender",checked:"boy"===this.state.form.gender,value:"boy",onChange:this.handleInputChange}),h.a.createElement("label",{className:"sex"},"Boy")))),h.a.createElement("div",{className:"form-group row"},h.a.createElement("label",{className:"col-sm-2 col-3 col-form-label text-center"},"Job"),h.a.createElement("div",{className:"col-sm-9 col-9"},h.a.createElement("input",{id:"job",className:"form-control",name:"job",type:"text",onChange:this.handleInputChange}))),h.a.createElement("div",{className:"form-group row"},h.a.createElement("label",{className:"col-sm-2 col-3 col-form-label text-center"},"Hobby"),h.a.createElement("div",{className:"col-sm-9 col-9"},h.a.createElement("input",{id:"hobby",className:"form-control",name:"hobby",type:"text",onChange:this.handleInputChange}))),h.a.createElement("div",{className:"form-group row"},h.a.createElement("label",{className:"col-sm-2 col-3 col-form-label text-center"},"Guide"),h.a.createElement("div",{className:"col-sm-9 col-9"},h.a.createElement("textarea",{id:"guide",className:"form-control",name:"guide",rows:"5",onChange:this.handleInputChange}))))}}]),n}(h.a.Component),A=function(e){Object(i.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).state={personalinfo:null,image:null},a.compRef=h.a.createRef(),a.personalInfoRef=h.a.createRef(),a.personalPhotoRef=h.a.createRef(),a.setImg=a.setImg.bind(Object(s.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(s.a)(a)),a.postData=a.postData.bind(Object(s.a)(a)),a.switchChat=a.switchChat.bind(Object(s.a)(a)),a}return Object(c.a)(n,[{key:"componentDidUpdate",value:function(){!0===this.props.fullComp?this.compRef.current.classList.add("fullComp"):this.compRef.current.classList.remove("fullComp")}},{key:"setImg",value:function(e){this.setState({image:e})}},{key:"handleSubmit",value:function(){var e=this,t=this.personalInfoRef.current.state.form;t.userId=w.a.get("userId"),this.setState({personalinfo:t},(function(){e.postData(e.state.image,"uploadImg","/uploadimage"),e.postData(e.state.personalinfo,"savePersonal","/persondata/")}))}},{key:"postData",value:function(e,t,n){var a=this,r=new FormData;r.append("photo",e);var o={};o.formData=r,o.userId=w.a.get("userId"),p.a["".concat(t)]("".concat("http://ec2-13-231-184-72.ap-northeast-1.compute.amazonaws.com:3000/api").concat(n),"uploadImg"===t?o:e).then((function(e){a.props.history.push("/chat/chatroom")}))}},{key:"switchChat",value:function(e){document.getElementsByClassName("chatarea")[0].style.display=e}},{key:"render",value:function(){var e=this;return h.a.createElement("div",{ref:this.compRef,className:"chat main"},h.a.createElement("section",{className:"chatarea"},h.a.createElement("div",{className:"container"},h.a.createElement("div",{className:"row justify-content-center"},h.a.createElement(L,{setImg:this.setImg})),h.a.createElement("div",{className:"row justify-content-center"},h.a.createElement("div",{className:"col-12"},h.a.createElement("p",{className:"notify"},'Please upload your profile, and enter your basic info. Name = Ann, Country = Taiwan, Gender = Girl, Job = Teacher, Hobby = Piano, Guide = Hello!. After you filling out the form, please click "Submit" to enter to chat room.'),h.a.createElement("form",{className:"personalInfo"},h.a.createElement(C,{ref:this.personalInfoRef})))),h.a.createElement("div",{className:"row justify-content-center mt-3"},h.a.createElement("button",{id:"submit",className:"btn btn-outline-secondary align-self-center",onClick:this.handleSubmit},"Submit")))),h.a.createElement(g.d,null,h.a.createElement(g.b,{path:"/chat/chatroom",render:function(){return h.a.createElement(I,{switchChat:function(t){return e.switchChat(t)}})}})))}}]),n}(h.a.Component);t.default=A},71:function(e,t,n){e.exports=n(76)},72:function(e,t,n){"use strict";function a(e,t,n,a,r,o,c){try{var s=e[o](c),i=s.value}catch(l){return void n(l)}s.done?t(i):Promise.resolve(i).then(a,r)}function r(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var c=e.apply(t,n);function s(e){a(c,r,o,s,i,"next",e)}function i(e){a(c,r,o,s,i,"throw",e)}s(void 0)}))}}n.d(t,"a",(function(){return r}))},73:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n(71),r=n.n(a),o=n(72),c=n(11),s={request_headers:{"Content-Type":"application/json",Authorization:n.n(c).a.get("access_token")},requesDishes:function(){var e=Object(o.a)(r.a.mark((function e(t,n){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("called fetch!"),e.next=3,fetch(t,{method:"POST",mode:"cors",credentials:"same-origin",headers:this.request_headers,body:JSON.stringify(n)}).then((function(e){return e.json()}));case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),uploadImg:function(e,t){return fetch("".concat(e,"/").concat(t.userId,"/"),{method:"POST",headers:this.request_headers,body:t.formData}).then((function(e){return e.json()}))},savePersonal:function(e,t){return fetch(e,{headers:this.request_headers,method:"POST",body:JSON.stringify(t)}).then((function(e){return e.json()}))},deleteMessage:function(e,t){return console.log("data is =>",t),fetch(e,{headers:this.request_headers,method:"DELETE",body:JSON.stringify(t)}).then((function(e){return e.json()}))},fetchImage:function(e,t){return fetch("".concat(e).concat(t),{headers:this.request_headers,method:"GET"}).then((function(e){var t=e.body.getReader();return new ReadableStream({start:function(e){return function n(){return t.read().then((function(t){var a=t.done,r=t.value;if(!a)return e.enqueue(r),n();e.close()}))}()}})})).then((function(e){return new Response(e)})).then((function(e){return e.blob()})).then((function(e){return URL.createObjectURL(e)}))},shortestPath:function(e,t){return fetch(e,{headers:this.request_headers,method:"POST",body:t}).then((function(e){return e.json()}))},choosePrice:function(e,t){return fetch(e,{headers:this.request_headers,method:"POST",body:JSON.stringify({price:t})}).then((function(e){return e.json()})).catch((function(e){console.log("err is =>",e)}))},checkOut:function(e,t){return console.log("selected_item is =>",t),fetch(e,{headers:this.request_headers,method:"POST",body:JSON.stringify(t)}).then((function(e){return e.json()}))},getShopItems:function(e,t){var n={user:t};return Object.keys(n).forEach((function(t){return e.searchParams.append(t,n[t])})),console.log("url is =>",e),fetch(e,{headers:this.request_headers,method:"GET"}).then((function(e){return e.json()}))},getPosts:function(e,t){var n={discuss_type:t};return Object.keys(n).forEach((function(t){return e.searchParams.append(t,n[t])})),fetch(e,{headers:this.request_headers,method:"GET"}).then((function(e){return e.json()}))},getEachPost:function(e,t){var n={post_id:t};return Object.keys(n).forEach((function(t){return e.searchParams.append(t,n[t])})),fetch(e,{headers:this.request_headers,method:"GET"}).then((function(e){return e.json()}))},savePost:function(e,t){return fetch(e,{headers:this.request_headers,method:"POST",body:JSON.stringify(t)}).then((function(e){return e.json()}))},leaveMessage:function(e,t){return fetch(e,{headers:this.request_headers,method:"POST",body:JSON.stringify(t)}).then((function(e){return e.json()}))}}},76:function(e,t,n){var a=function(e){"use strict";var t=Object.prototype,n=t.hasOwnProperty,a="function"===typeof Symbol?Symbol:{},r=a.iterator||"@@iterator",o=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function s(e,t,n,a){var r=t&&t.prototype instanceof u?t:u,o=Object.create(r.prototype),c=new O(a||[]);return o._invoke=function(e,t,n){var a="suspendedStart";return function(r,o){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===r)throw o;return k()}for(n.method=r,n.arg=o;;){var c=n.delegate;if(c){var s=b(c,n);if(s){if(s===l)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===a)throw a="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a="executing";var u=i(e,t,n);if("normal"===u.type){if(a=n.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(a="completed",n.method="throw",n.arg=u.arg)}}}(e,n,c),o}function i(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(a){return{type:"throw",arg:a}}}e.wrap=s;var l={};function u(){}function m(){}function h(){}var f={};f[r]=function(){return this};var d=Object.getPrototypeOf,p=d&&d(d(j([])));p&&p!==t&&n.call(p,r)&&(f=p);var g=h.prototype=u.prototype=Object.create(f);function v(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function y(e,t){var a;this._invoke=function(r,o){function c(){return new t((function(a,c){!function a(r,o,c,s){var l=i(e[r],e,o);if("throw"!==l.type){var u=l.arg,m=u.value;return m&&"object"===typeof m&&n.call(m,"__await")?t.resolve(m.__await).then((function(e){a("next",e,c,s)}),(function(e){a("throw",e,c,s)})):t.resolve(m).then((function(e){u.value=e,c(u)}),(function(e){return a("throw",e,c,s)}))}s(l.arg)}(r,o,a,c)}))}return a=a?a.then(c,c):c()}}function b(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,b(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var a=i(n,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,l;var r=a.arg;return r?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function w(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function j(e){if(e){var t=e[r];if(t)return t.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function t(){for(;++a<e.length;)if(n.call(e,a))return t.value=e[a],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:k}}function k(){return{value:void 0,done:!0}}return m.prototype=g.constructor=h,h.constructor=m,h[c]=m.displayName="GeneratorFunction",e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,c in e||(e[c]="GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},v(y.prototype),y.prototype[o]=function(){return this},e.AsyncIterator=y,e.async=function(t,n,a,r,o){void 0===o&&(o=Promise);var c=new y(s(t,n,a,r),o);return e.isGeneratorFunction(n)?c:c.next().then((function(e){return e.done?e.value:c.next()}))},v(g),g[c]="Generator",g[r]=function(){return this},g.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var a=t.pop();if(a in e)return n.value=a,n.done=!1,n}return n.done=!0,n}},e.values=j,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function a(n,a){return c.type="throw",c.arg=e,t.next=n,a&&(t.method="next",t.arg=void 0),!!a}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],c=o.completion;if("root"===o.tryLoc)return a("end");if(o.tryLoc<=this.prev){var s=n.call(o,"catchLoc"),i=n.call(o,"finallyLoc");if(s&&i){if(this.prev<o.catchLoc)return a(o.catchLoc,!0);if(this.prev<o.finallyLoc)return a(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return a(o.catchLoc,!0)}else{if(!i)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return a(o.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;a>=0;--a){var r=this.tryEntries[a];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var c=o?o.completion:{};return c.type=e,c.arg=t,o?(this.method="next",this.next=o.finallyLoc,l):this.complete(c)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),w(n),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var a=n.completion;if("throw"===a.type){var r=a.arg;w(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:j(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},e}(e.exports);try{regeneratorRuntime=a}catch(r){Function("r","regeneratorRuntime = r")(a)}},77:function(e,t,n){},83:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(19);function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}}}]);
//# sourceMappingURL=8.60969819.chunk.js.map