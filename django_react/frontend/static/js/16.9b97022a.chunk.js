(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[16],{199:function(e,a,t){},250:function(e,a,t){"use strict";t.r(a);var o=t(18),n=t(7),s=t(8),r=t(12),d=t(9),c=t(10),i=t(0),y=t.n(i),l=(t(199),t(248)),k=function(e){Object(d.a)(t,e);var a=Object(c.a)(t);function t(e){var o;return Object(n.a)(this,t),(o=a.call(this,e)).state={datakey:e.datakey,datanote:e.datanote,keyboardkey:e.keyboardkey,class:e.class,fired:!1},o.handleMouseDown=o.handleMouseDown.bind(Object(r.a)(o)),o.handleMouseUp=o.handleMouseUp.bind(Object(r.a)(o)),o}return Object(s.a)(t,[{key:"handleMouseDown",value:function(e,a){var t=a.timeStamp;this.props.handleMouseDown(e,a.type,t)}},{key:"handleMouseUp",value:function(e,a){var t=a.timeStamp;this.props.handleMouseUp(e,a.type,t)}},{key:"render",value:function(){return y.a.createElement("div",{className:this.state.class,"data-key":this.state.datakey,"data-note":this.state.datanote,onMouseDown:this.handleMouseDown.bind(this,this.state.datakey),onMouseUp:this.handleMouseUp.bind(this,this.state.datakey)},y.a.createElement("span",{className:"hints"},this.state.keyboardkey))}}]),t}(y.a.Component),u=function(e){Object(d.a)(t,e);var a=Object(c.a)(t);function t(e){var o;return Object(n.a)(this,t),(o=a.call(this,e)).state={datakey:e.datakey,src:e.src,keyboardkey:e.keyboardkey},o}return Object(s.a)(t,[{key:"render",value:function(){return y.a.createElement("audio",{"data-key":this.state.datakey,keyboardkey:this.state.keyboardkey,src:this.state.src})}}]),t}(y.a.Component),m=function(e){Object(d.a)(t,e);var a=Object(c.a)(t);function t(e){var o;return Object(n.a)(this,t),(o=a.call(this,e)).state={rateValue:60},o}return Object(s.a)(t,[{key:"updaterateValue",value:function(e){this.setState({rateValue:e.target.value})}},{key:"render",value:function(){var e=this;return y.a.createElement("header",{className:"col-12 col-s-12"},y.a.createElement("p",{className:"title"},"Use your keyboard."),y.a.createElement("p",{className:"title"},"Hover for hints."),y.a.createElement("p",{className:"title"},"Show Piano"),y.a.createElement("div",{id:"MusicRateArea",className:"musicrate_area"},y.a.createElement("p",{className:"music_rate"}," Music Rate"),y.a.createElement("input",{value:this.state.rateValue,onChange:this.updaterateValue.bind(this),type:"text",placeholder:"60 ~ 190"}),y.a.createElement("button",{className:"rate_btn",onClick:function(){e.props.handleMusicRate(e.state.rateValue)}},"Enter")))}}]),t}(y.a.Component),b=function(e){Object(d.a)(t,e);var a=Object(c.a)(t);function t(e){var o;return Object(n.a)(this,t),(o=a.call(this,e)).state={keyboardarray:[{datakey:"c/4",datanote:"C",keyboardkey:"A",src:"http://carolinegabriel.com/demo/js-keyboard/sounds/040.wav",className:"key"},{datakey:"c#/4",datanote:"C#",keyboardkey:"W",src:"http://carolinegabriel.com/demo/js-keyboard/sounds/041.wav",className:"key sharp"},{datakey:"d/4",datanote:"D",keyboardkey:"S",src:"http://carolinegabriel.com/demo/js-keyboard/sounds/042.wav",className:"key"},{datakey:"d#/4",datanote:"D#",keyboardkey:"E",src:"http://carolinegabriel.com/demo/js-keyboard/sounds/043.wav",className:"key sharp"},{datakey:"e/4",datanote:"E",keyboardkey:"D",src:"http://carolinegabriel.com/demo/js-keyboard/sounds/044.wav",className:"key"},{datakey:"f/4",datanote:"F",keyboardkey:"F",src:"http://carolinegabriel.com/demo/js-keyboard/sounds/045.wav",className:"key"},{datakey:"f#/4",datanote:"F#",keyboardkey:"T",src:"http://carolinegabriel.com/demo/js-keyboard/sounds/046.wav",className:"key sharp"},{datakey:"g/4",datanote:"G",keyboardkey:"G",src:"http://carolinegabriel.com/demo/js-keyboard/sounds/047.wav",className:"key"},{datakey:"g#/4",datanote:"G#",keyboardkey:"Y",src:"http://carolinegabriel.com/demo/js-keyboard/sounds/048.wav",className:"key sharp"},{datakey:"a/4",datanote:"A",keyboardkey:"H",src:"http://carolinegabriel.com/demo/js-keyboard/sounds/049.wav",className:"key"},{datakey:"a#/4",datanote:"A#",keyboardkey:"U",src:"http://carolinegabriel.com/demo/js-keyboard/sounds/050.wav",className:"key sharp"},{datakey:"b/4",datanote:"B",keyboardkey:"J",src:"http://carolinegabriel.com/demo/js-keyboard/sounds/051.wav",className:"key"},{datakey:"c/5",datanote:"C",keyboardkey:"K",src:"http://carolinegabriel.com/demo/js-keyboard/sounds/052.wav",className:"key"},{datakey:"c#/5",datanote:"C#",keyboardkey:"O",src:"http://carolinegabriel.com/demo/js-keyboard/sounds/053.wav",className:"key sharp"},{datakey:"d/5",datanote:"D",keyboardkey:"L",src:"http://carolinegabriel.com/demo/js-keyboard/sounds/054.wav",className:"key"},{datakey:"d#/5",datanote:"D#",keyboardkey:"P",src:"http://carolinegabriel.com/demo/js-keyboard/sounds/055.wav",className:"key sharp"},{datakey:"e/5",datanote:"E",keyboardkey:";",src:"http://carolinegabriel.com/demo/js-keyboard/sounds/056.wav",className:"key"}],startTime:null,datakey:null},o}return Object(s.a)(t,[{key:"handleMouseDown",value:function(e,a,t){(this.props.setCounter(0),this.setState({startTime:t}),"mousedown"===a)&&document.querySelector('audio[data-key= "'.concat(e,'" ]')).play()}},{key:"handleMouseUp",value:function(e,a,t){var o=(t-this.state.startTime)/1e3;"mouseup"===a&&this.props.printNote(o,e)}},{key:"renderSquare",value:function(e,a,t,o,n){var s=this;return y.a.createElement(k,{class:n,key:o,datakey:e,datanote:a,keyboardkey:t,handleMouseDown:function(e,a,t){s.handleMouseDown(e,a,t)},handleMouseUp:function(e,a,t){s.handleMouseUp(e,a,t)}})}},{key:"renderAudio",value:function(e,a,t,o){return y.a.createElement(u,{key:o,datakey:e,keyboardkey:t,src:a})}},{key:"render",value:function(){var e=this;return y.a.createElement("div",{id:"main",className:"col-12 col-s-12"},y.a.createElement("div",{className:"keys"},this.state.keyboardarray.map((function(a,t){return e.renderSquare(a.datakey,a.datanote,a.keyboardkey,"EachKey".concat(t),a.className)}))),y.a.createElement("div",null,this.state.keyboardarray.map((function(a,t){return e.renderAudio(a.datakey,a.src,a.keyboardkey,"Audio".concat(t))}))))}}]),t}(y.a.Component),h=function(e){Object(d.a)(t,e);var a=Object(c.a)(t);function t(e){var o;return Object(n.a)(this,t),(o=a.call(this,e)).state={rate:60,executed:!1,sheetnumber:1,note_data:[],Measure:0,startTime:null,fired:!1},o.keydown=o.keydown.bind(Object(r.a)(o)),o.keyup=o.keyup.bind(Object(r.a)(o)),o}return Object(s.a)(t,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.keydown),window.addEventListener("keyup",this.keyup)}},{key:"keydown",value:function(e){65!=e.keyCode&&87!=e.keyCode&&83!=e.keyCode&&69!=e.keyCode&&68!=e.keyCode&&70!=e.keyCode&&84!=e.keyCode&&71!=e.keyCode&&89!=e.keyCode&&72!=e.keyCode&&85!=e.keyCode&&74!=e.keyCode&&75!=e.keyCode&&79!=e.keyCode&&76!=e.keyCode&&80!=e.keyCode&&186!=e.keyCode||(this.state.fired||(this.setState({fired:!0}),this.setCounter(0),this.setState({startTime:e.timeStamp}),document.querySelector('audio[keyboardkey= "'.concat(e.key,'" ]')).play()))}},{key:"keyup",value:function(e){if(65==e.keyCode||87==e.keyCode||83==e.keyCode||69==e.keyCode||68==e.keyCode||70==e.keyCode||84==e.keyCode||71==e.keyCode||89==e.keyCode||72==e.keyCode||85==e.keyCode||74==e.keyCode||75==e.keyCode||79==e.keyCode||76==e.keyCode||80==e.keyCode||186==e.keyCode){var a=(e.timeStamp-this.state.startTime)/1e3,t=document.querySelector('audio[keyboardkey= "'.concat(e.key,'" ]')).getAttribute("data-key");this.printNote(a,t)}}},{key:"handleMusicRate",value:function(e){this.setState({rate:e})}},{key:"setCounter",value:function(e){var a=this;if(!0!==this.state.executed&&!1===this.state.executed&&0===e){this.setState({executed:!0});var t=60/this.state.rate*4*1e3+1e3;setTimeout((function(){var e=l.a.Flow,t=document.getElementById("sheet"),o=new e.Renderer(t,e.Renderer.Backends.SVG);o.resize(500,500);var n=o.getContext();n.setFont("Arial",10,"").setBackgroundFillStyle("#eed");var s=new e.Stave(10,20,300);s.addClef("treble").addTimeSignature("4/4"),s.setContext(n).draw();var r=a.state.note_data,d=new l.a.Flow.Formatter,c=new e.Voice({num_beats:4,beat_value:4}).addTickables(r);d.joinVoices([c]).formatToStave([c],s),c.draw(n,s),a.setState({note_data:[]})}),t)}}},{key:"printNote",value:function(e,a){var t=this,n=l.a.Flow,s=60/this.state.rate*4,r=60/this.state.rate*3,d=60/this.state.rate*2,c=60/this.state.rate,i=60/this.state.rate/2,y=60/this.state.rate/4,k=function(e,a){var s=e.match(/#/i)||e.match(/b/i),r=a.match(/d/i);null===r?s?"#"===s[0]?t.setState((function(t){return{note_data:[].concat(Object(o.a)(t.note_data),[new n.StaveNote({clef:"treble",keys:["".concat(e)],duration:a}).addAccidental(0,new n.Accidental("#"))])}})):"b"===s[0]&&t.setState((function(t){return{note_data:[].concat(Object(o.a)(t.note_data),[new n.StaveNote({clef:"treble",keys:["".concat(e)],duration:a}).addAccidental(0,new n.Accidental("b"))])}})):t.setState((function(t){return{note_data:[].concat(Object(o.a)(t.note_data),[new n.StaveNote({clef:"treble",keys:["".concat(e)],duration:a})])}})):r&&(s?"#"===s?t.setState((function(t){return{note_data:[].concat(Object(o.a)(t.note_data),[new n.StaveNote({clef:"treble",keys:["".concat(e)],duration:a}).addAccidental(0,new n.Accidental("#")).addDotToAll()])}})):"b"===s&&t.setState((function(t){return{note_data:[].concat(Object(o.a)(t.note_data),[new n.StaveNote({clef:"treble",keys:["".concat(e)],duration:a}).addAccidental(0,new n.Accidental("b")).addDotToAll()])}})):t.setState((function(t){return{note_data:[].concat(Object(o.a)(t.note_data),[new n.StaveNote({clef:"treble",keys:["".concat(e)],duration:a}).addDotToAll()])}})))};e===s||e>s?k(a,"w"):e>=r?k(a,"2d"):e>=d?k(a,"2"):e>c&&e<d?k(a,"qd"):e===c?k(a,"q"):e>i&&e<c?k(a,"8d"):e===i?k(a,"8"):e<i&&e>y?k(a,"16d"):e===y?k(a,"16"):e<y&&k(a,"32")}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.keydown),window.removeEventListener("keyup",this.keyup)}},{key:"render",value:function(){var e=this;return y.a.createElement("div",{className:"pianogame main"},y.a.createElement(m,{handleMusicRate:function(a){return e.handleMusicRate(a)}}),y.a.createElement("div",{className:"col-12 col-s-12 nowplaying"}),y.a.createElement(b,{setCounter:function(a){return e.setCounter(a)},printNote:function(a,t){return e.printNote(a,t)}}),y.a.createElement("div",{id:"sheet",className:"col-12 col-s-12 sheet"},y.a.createElement("div",{id:"sheet1"})))}}]),t}(y.a.Component);a.default=h}}]);
//# sourceMappingURL=16.9b97022a.chunk.js.map